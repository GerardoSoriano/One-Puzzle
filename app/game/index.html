<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>One Puzzle</title>
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="../resources/lib/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>
    <nav id="header" class="navbar navbar-dark bg-dark">
        <a class="navbar-brand mr-auto" href="#">One Puzzle</a>
        <img src="../resources/img/io.jpg" width="30" height="30" class="rounded-circle">
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a href="" class="nav-link dropdown-toggle lead" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@gerardosoriano97</a>
                <div class="dropdown-menu">
                    <a href="" class="dropdown-item">1</a>
                    <a href="" class="dropdown-item">2</a>
                    <a href="" class="dropdown-item">3</a>
                </div>
            </li>
        </ul>
    </nav>

    <div id="content" class="container-fluid px-0 position-relative">
        <div id="menu" class="w-100 h-100 position-absolute d-none">
            <div class="row d-flex justify-content-center m-5">
                <div class="col-6 text-center">
                    <span class="display-1 text-white">ONE PUZZLE</span>
                </div>
            </div>
            <div class="row justify-content-center m-3">
                <div class="col-4">
                    <button id="btnPlay" class="btn btn-block btn-light">Jugar</button>
                </div>
            </div>
            <div class="row justify-content-center m-3">
                <div class="col-4">
                    <button id="btnTutorial" class="btn btn-block btn-light">¿Cómo jugar?</button>
                </div>
            </div>
            <div class="row justify-content-center m-3">
                <div class="col-4">
                    <button id="btnSettings" class="btn btn-block btn-light">Opciones</button>
                </div>
            </div>
            <div class="row justify-content-center m-3">
                <div class="col-4">
                    <button id="btnStatistics" class="btn btn-block btn-light">Estadisticas</button>
                </div>
            </div>
        </div>
        <div id="hud" class="w-100 h-100 position-absolute d-none"></div>
        <span id="timer" class="text-success display-4 font-weight-bold mx-3">10:00</span>
        <div id="lose" class="w-100 h-100 position-absolute justify-content-center align-items-center bg-danger d-none">
            <span class="display-1 text-white text-uppercase">P E R D I S T E</span>
        </div>
    </div>

    <footer id="footer">

    </footer>
    <!-- LIBS -->
    <script src="../resources/lib/jquery/dist/jquery.min.js"></script>
    <script src="../resources/lib/three/build/three.min.js"></script>
    <script src="../resources/lib/popper.js/dist/popper.min.js"></script>
    <script src="../resources/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- PLUGINGS -->
    <script src="../resources/plugins/OrbitControls.js"></script>
    <script src="../resources/plugins/PointerLockControls.js"></script>
    <script src="../resources/plugins/OBJLoader.js"></script>
    <script src="../resources/plugins/Water.js"></script>
    <!-- SHADERS -->
    <script id="vsCelShading" type="x-shader/x-vertex">
        varying vec3 vLightDir;
        varying vec3 vEyeNorm;
        varying vec4 vColor;

        uniform vec3 uLightPos;
        uniform vec4 uColor;

        void main(){
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

            vec4 tmp = modelViewMatrix * vec4(uLightPos, 1.0);
            vLightDir = tmp.xyz;

            vEyeNorm = normalMatrix * normal;
            
            vColor = uColor;
        }
    </script>
    <script id="fsCelShading" type="x-shader/x-fragment">
        varying vec3 vLightDir;
        varying vec3 vEyeNorm;
        varying vec4 vColor;

        void main(){
            float ndotl = dot(normalize(vEyeNorm), normalize(vLightDir));

            if(ndotl > 0.8){
                ndotl = 1.0;
            }else if(ndotl > 0.6){
                ndotl = 0.6;
            }else{
                ndotl = 0.2;
            }

            gl_FragColor = vec4(ndotl, ndotl, ndotl, 1.0) * vColor;
        }
    </script>
    <script id="vsSkydome" type="application/x-glsl">  
        varying vec2 vUV;
        
        void main() {  
          vUV = uv;
          vec4 pos = vec4(position, 1.0);
          gl_Position = projectionMatrix * modelViewMatrix * pos;
        }
    </script>   
    <script id="fsSkydome" type="application/x-glsl">  
        uniform sampler2D texture;  
        varying vec2 vUV;
        
        void main() {  
          vec4 sample = texture2D(texture, vUV);
          gl_FragColor = vec4(sample.xyz, sample.w);
        }
    </script>  
    <!-- CLASSES -->
    <script src="js/class/GraphicsHelper.js"></script>
    <!-- LOGIC -->
    <script src="js/game.js"></script>
</body>
</html>